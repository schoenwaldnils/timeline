<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charSet="utf-8" />
</head>
<body>
  <script async>
    function isLocale(tested) {
      return ['de', 'en'].some(locale => locale === tested)
    }

    function getInitialLocale() {
      const DEFAULT_LOCALE = 'en'

      // preference from the previous session
      const localSetting = localStorage.getItem('locale')
      if (localSetting && isLocale(localSetting)) {
        return localSetting
      }

      // the language setting of the browser
      const [browserSetting] = navigator.language.split('-')
      if (isLocale(browserSetting)) {
        return browserSetting
      }

      return DEFAULT_LOCALE
    }

    window.location.href = `${window.location.origin}/${getInitialLocale()}/`
  </script>
</body>
</html>
